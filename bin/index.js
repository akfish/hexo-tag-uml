// Generated by CoffeeScript 1.6.3
var Command, async, colors, extend, file, fs, htmlTag, packageInfo, umlOptions, util;

extend = hexo.extend;

util = hexo.util;

file = hexo.file;

htmlTag = hexo.util.html_tag;

async = require('async');

colors = require('colors');

fs = require('fs');

packageInfo = require('../package.json');

Command = require('./Command');

umlOptions = {
  desc: packageInfo.description,
  usage: '<argument>',
  "arguments": [
    {
      name: 'install',
      desc: 'Install assets.'
    }, {
      name: 'uninstall',
      desc: 'Uninstall assets.'
    }
  ]
};

hexo.extend.console.register("uml", packageInfo.description, umlOptions, function(args, callback) {
  var cmd;
  cmd = new Command(callback);
  return cmd.execute(args._[0]);
});

hexo.extend.tag.register("uml", (function(args, content) {
  var diagramType, result;
  diagramType = args[0];
  if (diagramType === '') {
    diagramType = "sequence";
  }
  if (diagramType !== "sequence" && diagramType !== "robustness") {
    return "<p>[hexo-tag-uml error: invalid diagram type: '" + diagramType + "']</p>";
  }
  result = "<script type='text/jumly+" + diagramType + "'>" + content + "</script>";
  return result;
}), true);
